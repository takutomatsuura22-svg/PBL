# 現在の評価方法まとめ

## 📋 目次

1. [モチベーション評価](#モチベーション評価)
2. [得意不得意・スキル評価](#得意不得意スキル評価)
3. [タスク量評価](#タスク量評価)
4. [評価の課題](#評価の課題)

---

## モチベーション評価

### 基本版（`motivation.ts`）

**使用関数**: `calculateMotivation()`

**評価要素と重み**:
1. **タスク完了率（40%）**
   - 完了タスク数 ÷ 全タスク数
   - 完了率 × 5 = スコア（1-5）

2. **強みマッチ度（25%）**
   - 未完了タスクのうち、カテゴリが`strengths`に含まれるタスクの割合
   - 難易度も考慮（難易度が高いほど重みが大きい）
   - マッチ度 × 5 = スコア（1-5）

3. **チーム相性（20%）**
   - 好みのパートナー（`preferred_partners`）がチームにいる: +0.5/人
   - 避けたいパートナー（`avoided_partners`）がチームにいる: -1.0/人
   - ベース3.0 + 調整 = スコア（1-5）

4. **MBTI特性（15%）**
   - EN系（外向的・直感的）: 4.0
   - ES系（外向的・感覚的）: 3.5
   - IN系（内向的・直感的）: 3.0
   - IS系（内向的・感覚的）: 2.5

**計算式**:
```
モチベーション = 
  (タスク完了率スコア × 0.4) +
  (強みマッチ度スコア × 0.25) +
  (チーム相性スコア × 0.2) +
  (MBTIベーススコア × 0.15)
```

---

### 改善版（`motivation_enhanced.ts`）

**使用関数**: `calculateMotivationEnhanced()`

**評価要素と重み**（チェックインがある場合）:

1. **自己申告データ（35%）**
   - 日次チェックインのモチベーションスコア
   - 重み付き平均（新しいデータほど重い）
   - データの新しさと量で信頼度を調整

2. **タスク完了率（25%）**
   - 基本版と同じ

3. **強みマッチ度（20%）**
   - 基本版と同じ

4. **チーム相性（15%）**
   - 基本版と同じ

5. **MBTI特性（5%）**
   - チェックインがある場合は重みを軽減

6. **活動データ（5%、オプション）**
   - タスク更新頻度
   - コミット頻度
   - メッセージ頻度
   - 会議出席率

**チェックインがない場合の重み**:
- タスク完了率: 40%
- 強みマッチ度: 25%
- チーム相性: 15%
- MBTI特性: 15%

**信頼度（Confidence）**:
- チェックインの新しさと量から計算
- 0.5〜1.0の範囲

---

## 得意不得意・スキル評価

### 現在の実装状況

**現状**: スキル評価の自動計算機能は**実装されていません**

### 現在のデータ構造

学生データには以下のスキル値が**手動で設定**されています：

- `skill_企画`: 1-5（企画スキル）
- `skill_実行`: 1-5（実行スキル）
- `skill_調整`: 1-5（調整スキル）
- `skill_探索`: 1-5（探索スキル）

### 得意不得意の判定

**`strengths`（得意分野）**:
- 手動で設定された配列
- 例: `["企画", "調整"]`
- タスクのカテゴリと照合してマッチ度を計算

**`weaknesses`（不得意分野）**:
- 手動で設定された配列
- 例: `["実行"]`
- 現在は主に表示用

### スキル評価の使用箇所

1. **タスク再割り当て提案**:
   - タスクのカテゴリと学生のスキル値を照合
   - スキル3以上を基準として判定
   - スキル適性が高いほど再割り当てスコアが高い

2. **モチベーション計算**:
   - タスクのカテゴリが`strengths`に含まれるかで判定
   - スキル値そのものは使用していない

### ドキュメント上の仕様（未実装）

`docs/ai_logic.md`には以下の仕様が記載されていますが、**実装されていません**：

**MBTI特性によるスキル補正**:
- EN系: 企画+0.3, 探索+0.3, 実行-0.2, 調整+0.1
- ES系: 実行+0.3, 調整+0.3, 企画-0.1, 探索-0.1
- IN系: 企画+0.2, 探索+0.2, 調整-0.3, 実行+0.1
- IS系: 実行+0.2, 企画-0.2, 探索-0.2, 調整+0.1
- J型: 実行+0.1, 調整+0.1
- P型: 探索+0.1, 企画+0.1

**実績ベースのスキル評価**:
- 完了タスクの難易度からスキルを逆算
- 現在は実装されていない

---

## タスク量評価

**使用関数**: `calculateLoad()`

**評価要素**:

1. **基本負荷**
   - 難易度（1-5）× 推定時間の重み
   - 推定時間は10時間を最大として正規化

2. **緊急度マルチプライヤ**
   - 期限超過: 2.0倍
   - 1日以内: 1.8倍
   - 3日以内: 1.5倍
   - 1週間以内: 1.2倍
   - それ以上: 1.0倍

3. **タスク数マルチプライヤ**
   - 3タスクを基準
   - 最大1.5倍

**計算式**:
```
各タスクの負荷 = (難易度 × 時間重み) × 緊急度マルチプライヤ
合計負荷 = Σ(各タスクの負荷) × タスク数マルチプライヤ
正規化 = (合計負荷 / 最大負荷15) × 4 + 1
```

**負荷レベル**:
- < 2.0: low（低い）
- < 3.0: medium（標準）
- < 4.0: high（高い）
- ≥ 4.0: critical（非常に高い）

---

## 評価の課題

### モチベーション評価の課題

1. **データソースが限定的**
   - チェックイン、タスク完了率、MBTIのみ
   - GitHub、Slackなどの活動データが未統合

2. **強みマッチ度の判定が単純**
   - カテゴリ名の完全一致のみ
   - スキル値そのものは使用していない

3. **文脈の欠如**
   - なぜモチベーションが変化したかの理由が不明確

### スキル評価の課題

1. **手動設定に依存**
   - スキル値が手動で設定されている
   - 自動計算機能がない

2. **実績データの未活用**
   - 実際のタスクパフォーマンスが反映されていない
   - スキルの成長が追跡されない

3. **MBTI補正の未実装**
   - ドキュメントには記載されているが実装されていない

4. **動的な更新がない**
   - スキルが成長しても評価が更新されない

### タスク量評価の課題

1. **推定時間の精度**
   - 推定時間が正確でない可能性
   - 実際の作業時間との乖離

2. **個人差の考慮不足**
   - 同じタスクでも個人によって負荷が異なる可能性
   - スキルレベルを考慮していない

---

## 改善の方向性

### モチベーション評価

1. **多角的データ統合**
   - GitHub、Slackなどの活動データを統合
   - 重み付けを調整

2. **理由分析の追加**
   - モチベーション変化の理由を分析
   - グラフにアノテーション表示

### スキル評価

1. **実績ベースの自動計算**
   - タスクパフォーマンスからスキルを計算
   - 時系列での成長を追跡

2. **MBTI補正の実装**
   - ドキュメントの仕様を実装

3. **動的な更新**
   - 定期的にスキル値を再計算

### タスク量評価

1. **スキル考慮**
   - スキルレベルに応じて負荷を調整
   - 個人差を考慮

2. **実績データの活用**
   - 過去のタスク完了時間から推定時間を改善

---

**最終更新**: 2025-11-17

