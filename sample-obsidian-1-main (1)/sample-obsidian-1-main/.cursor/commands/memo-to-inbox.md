# Memo→Inbox変換

## Description
00_Memoの雑なメモを全て01_Inboxの形式に整形して変換します（承認不要で自動実行）。

**重要**: 全てのファイルの中身を必ず読み込んで、内容を丁寧に分析してから整形します。

## 使用するツール
- `glob_file_search`: `.md` ファイルを検索
- `read_file`: ファイル内容を読み込む（複数ファイルを並列実行可能）
- `write`: Inbox形式のファイルを作成
- `run_terminal_cmd`: ファイルの移動（mvコマンド）
- `delete_file`: ファイルの削除（必要な場合）

## Prompt
指定された00_Memoのメモを01_Inboxの形式に整理して移動してください。

引数:
- Memoファイル名（省略可）: 変換元のファイル。省略時は00_Memo内の全ファイルをリスト表示

実行内容:
1. 00_Memoのメモを全て読み込む
2. 内容を分析して整理
3. 日付フォーマット `YYYYMMDD_内容.md` でファイル名を生成
4. 内容を整形して01_Inbox形式に変換
5. **自動的に** `01_Inbox/` に作成
6. 元のファイルは `99_Archive/` に移動
7. 変換後に00_Memo内の空のフォルダを自動削除

## 変換ルール

### ファイル名
- 元のファイル名に関係なく、内容からタイトルを生成
- 形式: `YYYYMMDD_内容.md`
- 例: `20251022_Next.jsのApp Router入門.md`

### 内容構成
```markdown
# [タイトル]

## 概要
[何についてのメモか、1-2文で要約]

## 内容
[元のメモの内容を整理]

## 次アクション
- [ ] 調べる必要があること
- [ ] 関連ノートにリンク

#inbox #tag1 #tag2
```

### トピック分割の判断基準
1つのメモに複数のトピックが含まれている場合、分割する：
- そのトピックだけで1つの独立したノートになるか？
- 別のトピックと混ぜても理解に支障がないか？
- 検索した時に「○○について知りたい」で見つかるか？

分割する場合は、各トピックごとに別ファイルを作成

## 出力形式

```markdown
## Memo→Inbox変換レポート

### 変換対象ファイル
- 00_Memo/[元のファイル名]

### 作成されるファイル
1. 01_Inbox/YYYYMMDD_タイトル1.md
   - 内容: [要約]
   - トピック数: [分割した場合]

2. 01_Inbox/YYYYMMDD_タイトル2.md
   - 内容: [要約]
   - トピック数: [分割した場合]

### 変換後の内容プレビュー

---

（変換後のプレビューをここに表示）

---

## 実行結果
✅ 01_Inbox/YYYYMMDD_タイトル1.md を作成しました
✅ 元のファイルは 99_Archive/ に移動しました
✅ 空のフォルダ0個を削除しました
```

## 実行手順

### ステップ1: ファイルの検索とリスト化
1. `00_Memo/` 内の全ての `.md` ファイルを検索（日付フォルダ内も含む）
2. ファイル一覧を取得
3. 引数が指定されている場合は該当ファイルのみ、省略されている場合は全ファイルを処理

### ステップ2: ファイルの読み込み（最重要）
**全ファイルを必ず1つ1つ丁寧に読み込む**

1. **全てのファイルの中身を必ず読み込む**（ファイル名だけで判断しない）
2. 複数ファイルがある場合でも、各ファイルの内容をしっかり確認する
3. `read_file` ツールを使って、ファイル全体を読み込む（複数ファイルを並列読み込み可能だが、各ファイルの内容は必ず確認）

### ステップ3: 変換処理（全てのファイル）
**全てのファイルを整形してInbox形式に変換する**

1. **メタデータの削除**: 
   - `---` で囲まれたメタデータセクションを削除
   - `## 💡 学んだ概念・パターン` などのTODOセクションを削除
   - `## 🔗 関連ノート` の空のセクションを削除
   - セッションID、時刻などのメタ情報を削除

2. **内容の整理**:
   - 実際の知識や説明の部分を抽出
   - コード例や実践的な内容を残す
   - 構造化された見出しと内容を保持
   - メタデータのみのファイルでも、構造化して保存

3. **タイトルの生成**:
   - 内容から最も適切なタイトルを生成
   - 具体性を持たせる（元のファイル名の内容部分を活用）
   - メタデータのみの場合は、ファイル名や内容から推測

4. **Inbox形式への変換**:
   - 日付: 今日の日付（YYYYMMDD形式）
   - ファイル名: `YYYYMMDD_タイトル.md`
   - 内容: 整理された構造化されたメモ

5. **ファイルの作成**:
   - `01_Inbox/` フォルダに新規ファイルを作成
   - 内容を書き込む

### ステップ4: アーカイブ移動
1. 全ての元ファイルを `99_Archive/` に移動
2. 同名ファイルが存在する場合は番号を付ける

### ステップ5: 空フォルダの削除
1. `00_Memo/` 内の空のフォルダを検索
2. 空のフォルダを全て削除（README.md等も含む）
3. 削除したフォルダ数を記録

### ステップ6: 結果の報告
処理結果をまとめて報告：
- 変換したファイル数
- 削除した空フォルダ数
- エラー数と理由

## 重要：変換時の注意点

### 基本方針
**全てのファイルを必ず読み込んで整形する**

ファイル名だけで判断せず、必ずファイルの中身を全て読んでから整形すること。

### メタデータのみのファイルの処理
メタデータのみのファイルでも、以下のように整理して変換する：

```markdown
# [元のファイル名または内容から推測したタイトル]

## 概要
セッション記録やファイル操作の記録

## 内容
[メタデータから推測できる内容]
- セッションID: xxx
- 日時: xxx
- 種別: xxx

## 次アクション
- [ ] 必要に応じて内容を確認

#inbox #session-record
```

### 実質的な内容があるファイルの処理
実質的な知識や学びが含まれているファイルは、それを中心に整形する：

```markdown
# [内容から生成したタイトル]

## 概要
[何についてのメモか、1-2文で要約]

## 内容
[実質的な知識や学びを整理]

## 次アクション
- [ ] 関連ノートにリンク
- [ ] 必要に応じてMemory Noteに変換

#inbox #tag1 #tag2
```

## ヒント

- **自動実行**: 承認不要で即座に移動します
- 完全に自由な形式のメモを整理
- トピックが複数ある場合は分割を推奨
- ファイル名は必ず内容から生成
- 日付は今日の日付を使用
- 元のファイルは99_Archiveに移動（削除ではなく）
- トピックが不明確な場合は[[07_System/Documentation/system-overview.md]]を参照

関連プロンプト: [[08_prompts/01_整理系/20250113_Memo→Inbox変換.md]]

## 使用例

```
/memo-to-inbox                    # 00_Memo内の全ファイルをリスト表示
/memo-to-inbox 雑メモ.md         # 特定のファイルを変換
/memo-to-inbox 学んだこと.txt     # 拡張子が違ってもOK
```

## 処理例

### 例: 全てのファイルを変換

全てのファイルが必ずInbox形式に変換されます。メタデータのみのファイルでも、構造化して保存します。

ファイル: `2025-10-23-10-04-59_セッション終了_完了.md`

**読み込んだ内容**:
```markdown
---
type: cursor-session
event: stop
date: 2025-10-23
tags: [cursor, ai-conversation, session-end]
---
# ✅ セッション終了記録
## 📊 セッション概要
- ステータス: completed
```

**変換後**:
```markdown
# セッション終了記録

## 概要
セッション記録

## 内容
- 日時: 2025-10-23
- 種別: セッション終了
- ステータ ID: xxx

## 次アクション
- [ ] 必要に応じて内容を確認

#inbox #session-record
```

